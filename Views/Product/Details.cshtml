<div class="row">
    <div class="col-sm-3">
        @Html.Partial("_SidebarPartial")
    </div>

    <div class="col-sm-9 padding-right">
        <div class="product-details">
            <!--product-details-->
            <div class="col-sm-5">
                <div class="view-product">
                    <img src="~/media/products/@Model.Image" alt="" />
                </div>
            </div>
            <div class="col-sm-7">
                <div class="product-information">
                    <h2>@Model.Name</h2>
                    <span>
                        <span>$@Model.Price.ToString("#,##0 VNĐ")</span>
                        <a class="btn btn-default add-to-cart" asp-action="Add" asp-controller="Cart" asp-route-Id="@Model.Id"><i class="fa fa-shopping-cart"></i>Add to cart</a>
                    </span>
                    <p><b>Availability:</b> In Stock</p>
                    <p><b>Condition:</b> New</p>
                    <p><b>Thương hiệu:</b> @Model.Brand.Name</p>
                    <p><b>Danh mục:</b> @Model.Category.Name</p>
                    <a href=""><img src="~/images/product-details/share.png" class="share img-responsive" alt="" /></a>
                </div>
            </div>
        </div>

        <div class="category-tab shop-details-tab">
            <div class="col-sm-12">
                <ul class="nav nav-tabs">
                    <li><a class="active" href="#reviews" data-toggle="tab">Details</a></li>
                    <li><a href="#comments" data-toggle="tab">Comments</a></li>
                </ul>
            </div>
            <div class="tab-content">
                <div class="tab-pane fade active in" id="reviews">
                    <div class="col-sm-12">
                        <ul>
                            <li><a href=""><i class="fa fa-user"></i>@User.Identity.Name</a></li>
                            <li><a href=""><i class="fa fa-clock-o"></i>@DateTime.Now.ToString("hh:mm tt")</a></li>
                            <li><a href=""><i class="fa fa-calendar-o"></i>@DateTime.Now.ToString("dd/MM/yyyy")</a></li>
                        </ul>
                        <form action="#">
                            <div>@Model.Description</div>
                            <textarea name="" readonly>@Model.Brand.Description</textarea>
                        </form>
                    </div>
                </div>
                <div class="tab-pane fade in" id="comments">
                    <div class="col-sm-12">
                        <form action="#">
                            <span class="input-container">
                                <input type="text" placeholder="Your Name" class="review-input" />
                                <input type="email" placeholder="Email Address" class="review-input" />
                            </span>
                            <textarea name="" placeholder="Write your review here..." class="review-textarea"></textarea>
                            <div class="rating">
                                <span class="star" data-value="1">&#9733;</span>
                                <span class="star" data-value="2">&#9733;</span>
                                <span class="star" data-value="3">&#9733;</span>
                                <span class="star" data-value="4">&#9733;</span>
                                <span class="star" data-value="5">&#9733;</span>
                            </div>
                            <p class="rating-value">Bạn đã chọn: <span id="selected-rating">0</span> sao</p>
                            <button type="button" class="btn btn-success pull-right">Submit</button>
                        </form>
                    </div>
                </div>


            </div>
        </div>
        
        <div class="recommended_items">
            <h2 class="title text-center">Recommended Product</h2>

            <div id="recommended-item-carousel" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    @if (ViewBag.RelatedProducts != null && ((IEnumerable<ProductModel>)ViewBag.RelatedProducts).Any())
                    {
                        <div class="item active">
                            @foreach (var relatedProduct in (IEnumerable<ProductModel>)ViewBag.RelatedProducts)
                            {
                                <div class="col-sm-4">
                                    <div class="product-image-wrapper">
                                        <div class="single-products">
                                            <div class="productinfo text-center">
                                                <a asp-action="Details" asp-controller="Product" asp-route-Id="@relatedProduct.Id">
                                                    <img src="~/media/products/@relatedProduct.Image" width="60px" alt="@relatedProduct.Name" />
                                                    <h2>@relatedProduct.Price.ToString("#,#00 VNĐ")</h2>
                                                    <p>@relatedProduct.Name</p>
                                                    <p>Danh mục : @relatedProduct.Category.Name</p>
                                                    <p>Thương hiệu : @relatedProduct.Brand.Name</p>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <div class="text-center">
                            <p>No Data Product Recomment.</p>
                        </div>
                    }
                </div>
                <a class="left recommended-item-control" href="#recommended-item-carousel" data-slide="prev">
                    <i class="fa fa-angle-left"></i>
                </a>
                <a class="right recommended-item-control" href="#recommended-item-carousel" data-slide="next">
                    <i class="fa fa-angle-right"></i>
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    .input-container {
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px; 
    }

    .review-input {
        width: 48%; 
        padding: 10px;
        border: 1px solid #ddd; 
        border-radius: 5px; 
        font-size: 16px; 
        transition: border-color 0.2s, box-shadow 0.2s; 
        background-color: #f9f9f9; 
    }

        .review-input:focus {
            border-color: #FE980F; 
            outline: none; 
            box-shadow: 0 0 5px rgba(254, 152, 15, 0.5); 
        }

    .review-textarea {
        width: 100%; 
        height: 100px; 
        padding: 10px;
        border: 1px solid #ddd; 
        border-radius: 5px;
        font-size: 16px; 
        margin-bottom: 15px; 
        resize: none; 
        transition: border-color 0.2s, box-shadow 0.2s;
        background-color: #f9f9f9;
    }

        .review-textarea:focus {
            border-color: #FE980F; 
            outline: none; 
            box-shadow: 0 0 5px rgba(254, 152, 15, 0.5); 
        }

    .rating {
        margin-bottom: 15px; 
        font-size: 100px;
    }

    .star {
        color: gray; 
        cursor: pointer; 
        transition: color 0.2s;
    }

        .star.selected {
            color: gold; 
        }

</style>

<script>
    const stars = document.querySelectorAll('.star');
    const selectedRatingDisplay = document.getElementById('selected-rating');

    stars.forEach(star => {
        star.addEventListener('click', () => {
            // Lấy giá trị của sao đã chọn
            const rating = star.getAttribute('data-value');

            // Xóa lớp "selected" khỏi tất cả các sao
            stars.forEach(s => {
                s.classList.remove('selected');
                // Thêm lớp "selected" cho sao đã chọn và tất cả các sao trước đó
                if (s.getAttribute('data-value') <= rating) {
                    s.classList.add('selected');
                }
            });

            // Cập nhật giá trị đánh giá
            selectedRatingDisplay.innerText = rating;
        });
    });


</script>
